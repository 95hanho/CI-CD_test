name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ğŸš€
on: [push]
jobs:
    Explore-GitHub-Actions:
        runs-on: ubuntu-latest
        steps:
            - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
            - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
            - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
            - name: Check out repository code
              uses: actions/checkout@v5
            - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
            - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
            - name: List files in the repository
              run: |
                  ls ${{ github.workspace }}
            - run: echo "ğŸ This job's status is ${{ job.status }}."
    ci:
        runs-on: ubuntu-latest # GitHubì—ì„œ ì œê³µí•˜ëŠ” Ubuntu Linux ê°€ìƒë¨¸ì‹ ì—ì„œ ì‹¤í–‰
        steps:
            - name: Checkout
              uses: actions/checkout@v4
              # ğŸ‘‰ í˜„ì¬ ë¦¬í¬ì§€í† ë¦¬ì˜ ì†ŒìŠ¤ë¥¼ ëŸ¬ë„ˆ(ë¹Œë“œ ì„œë²„)ì— ë‚´ë ¤ë°›ê¸°

            - name: Use Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: 20 # Node.js 20 ë²„ì „ì„ ì„¤ì¹˜
                  cache: "npm" # npm ìºì‹œë¥¼ í™œì„±í™”í•´ì„œ ì„¤ì¹˜ ì†ë„ ê°œì„ 
              # ğŸ‘‰ Next.js í”„ë¡œì íŠ¸ëŠ” Node.js ëŸ°íƒ€ì„ì´ í•„ìš”í•˜ë¯€ë¡œ í™˜ê²½ ì„¸íŒ…

            - name: Install
              run: npm ci
              # ğŸ‘‰ package-lock.json ê¸°ë°˜ìœ¼ë¡œ ì˜ì¡´ì„±(ë¼ì´ë¸ŒëŸ¬ë¦¬) ì„¤ì¹˜
              # npm install ëŒ€ì‹  npm ciëŠ” CI í™˜ê²½ì—ì„œ ë” ë¹ ë¥´ê³  ì¼ê´€ì„± ìˆê²Œ ì„¤ì¹˜ë¨

            - name: Lint
              run: npm run lint --if-present
              # ğŸ‘‰ ESLint ì‹¤í–‰. ì½”ë“œ ìŠ¤íƒ€ì¼/ë¬¸ë²• ì˜¤ë¥˜ ìë™ ê²€ì¦
              # ì‹¤íŒ¨ ì‹œ ì›Œí¬í”Œë¡œìš° ì „ì²´ê°€ ì—ëŸ¬ ì²˜ë¦¬ë¨

            - name: Typecheck
              run: npm run typecheck --if-present
              #  --if-presentë¥¼ ë¶™ì—¬ì„œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì•„ë‹ ë•Œ ìŠ¤í‚µí•˜ê³  ë„˜ì–´ê°‘ë‹ˆë‹¤.
              # ğŸ‘‰ TypeScript í”„ë¡œì íŠ¸ì¼ ê²½ìš° íƒ€ì… ì˜¤ë¥˜ê°€ ì—†ëŠ”ì§€ ê²€ì‚¬(tsc --noEmit)
              # JS í”„ë¡œì íŠ¸ë¼ë©´ ì´ ë‹¨ê³„ëŠ” ìŠ¤í‚µ ê°€ëŠ¥

            - name: Unit tests
              run: npm test --if-present
              # ğŸ‘‰ Jest, Vitest ê°™ì€ í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆ ì‹¤í–‰
              # --if-present: package.jsonì— "test" ìŠ¤í¬ë¦½íŠ¸ê°€ ì—†ìœ¼ë©´ ê·¸ëƒ¥ ë¬´ì‹œ

            - name: Build
              run: npm run build
              # ğŸ‘‰ Next.js ë¹Œë“œ. ê¸°ë³¸ì ìœ¼ë¡œ .next/ í´ë”ì— ì‚°ì¶œë¬¼ ìƒì„±
              # ì •ì  ë°°í¬ë¼ë©´ package.jsonì— "build": "next build && next export"ë¥¼ ë„£ì–´ out/ ìƒì„± ê°€ëŠ¥

            # (ì„ íƒ) ë¹Œë“œ ì‚°ì¶œë¬¼ ë³´ê´€ â€” ë””ë²„ê¹…/ì•„í‹°íŒ©íŠ¸ ì¦ë¹™ìš©
            - name: Upload build artifact
              if: success() # ìœ„ ë‹¨ê³„ë“¤ ì„±ê³µ ì‹œì—ë§Œ ì‹¤í–‰
              uses: actions/upload-artifact@v4
              with:
                  name: fe-build # ì €ì¥ë  ì•„í‹°íŒ©íŠ¸ ì´ë¦„
                  path: | # ì—…ë¡œë“œí•  ë¹Œë“œ ì‚°ì¶œë¬¼ ê²½ë¡œ
                      .next
                      out
                  if-no-files-found: ignore
              # ğŸ‘‰ Actions ì‹¤í–‰ ê²°ê³¼ íƒ­ì—ì„œ build ê²°ê³¼ë¬¼ì„ zip í˜•íƒœë¡œ ë‚´ë ¤ë°›ì•„ í™•ì¸ ê°€ëŠ¥
              #    ì˜ˆ: .next (SSR/ISR ë¹Œë“œ), out (ì •ì  export ê²°ê³¼ë¬¼)
